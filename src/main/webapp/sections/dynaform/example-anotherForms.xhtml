<ui:composition
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:p="http://primefaces.org/ui"
        xmlns:pe="http://primefaces.org/ui/extensions">
    <!-- EXAMPLE-SOURCE-START -->

<h:panelGroup id="dynaFormGroup">
    <p:messages id="messages" showSummary="true"/>

    <pe:dynaForm id="dynaForm" value="#{anotherDynaFormController.modelOne}" var="data"
                 buttonBarPosition="both" widgetVar="dynaFormWidget">
        <pe:dynaFormControl styleClass="pe-dynaform-label">
            <h:outputText value="#{data}"/>
        </pe:dynaFormControl>
        <pe:dynaFormControl type="separator">
            <p:separator/>
        </pe:dynaFormControl>        
        <pe:dynaFormControl type="input" for="input">
            <p:inputText id="input" value="#{data.value}" required="#{data.required}"/>
        </pe:dynaFormControl>
        <pe:dynaFormControl type="date" for="date" styleClass="calendar">
            <p:calendar id="date" value="#{data.value}" required="#{data.required}" showOn="button"/>
        </pe:dynaFormControl>
        <pe:dynaFormControl type="desc" for="desc">
            <p:inputTextarea id="desc" value="#{data.value}" required="#{data.required}" autoResize="false"/>
        </pe:dynaFormControl>

        <f:facet name="buttonBar">
            <p:commandButton value="Search" action="#{anotherDynaFormController.submitForm}"
                             process="dynaForm" update="_mainForm_dynaFormGroup _mainForm_inputValues"
                             oncomplete="handleComplete(xhr, status, args)"/>
            <p:commandButton type="reset" value="Reset" style="margin-left: 5px;"/>
        </f:facet>
    </pe:dynaForm>
</h:panelGroup>

<p:dialog header="Input values" widgetVar="inputValuesWidget">
    <p:dataList id="inputValues" value="#{anotherDynaFormController.inventoryProperties}" var="property"
                style="margin:10px;">
        <h:outputText value="#{property.position}: #{property.formattedValue}"
                      style="margin-right: 10px;"/>
    </p:dataList>
</p:dialog>

<h:outputScript id="dynaFormScript" target="body">
/* <![CDATA[ */
    function handleComplete(xhr, status, args) {
        if(args && args.isValid) {
            inputValuesWidget.show();
        } else {
            inputValuesWidget.hide();
        }
    }
/* ]]> */
</h:outputScript>

<h:outputStylesheet id="dynaFormCSS">
    .pe-dynaform-cell.separator {
        padding: 10px 0 10px 0;
    }    
    
    /* note: trick with colspan is needed for IE8 */
    .pe-dynaform-cell input,
    .pe-dynaform-cell textarea,
    .pe-dynaform-cell[colspan="1"] input,
    .pe-dynaform-cell[colspan="1"] textarea {
        width: 130px;
    }
</h:outputStylesheet>

    <!-- EXAMPLE-SOURCE-END -->
</ui:composition>