<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pe="http://primefaces.org/ui/extensions">
<ui:composition template="/templates/showcaseLayout.xhtml">
    <ui:define name="centerContent">
        <f:facet name="header">
            <h:outputText value="CodeMirror"/>
        </f:facet>
        <h:panelGroup layout="block" styleClass="centerContent">
            CodeMirror also provides support for code completion (Ctrl-Space) via completeMethod. This can be activated via <b>extraKeys</b> attribute.
        </h:panelGroup>

        <h:panelGroup layout="block" styleClass="centerExample">
			<p:growl id="growl" showDetail="true" />
            
			<pe:codeMirror id="codeMirror"
				mode="#{codeMirrorController.mode}"
				widgetVar="myCodeMirror"
				theme="eclipse" value="#{codeMirrorController.content}" lineNumbers="true"
				completeMethod="#{codeMirrorController.complete}"
				extraKeys="{ 'Ctrl-Space': function(cm) { myCodeMirror.complete(); }}" />
			
            <p:commandButton actionListener="#{codeMirrorController.changeMode}" update="codeMirror"
                             value="Change mode with AJAX" style="margin-top:10px;"/>
        </h:panelGroup>

        <ui:decorate template="/templates/twoTabsDecorator.html">
            <ui:define name="contentTab1">
&lt;p:growl id="growl" showDetail="true" /&gt;
                
&lt;pe:codeMirror id="codeMirror" mode="\#{codeMirrorController.mode}"
	theme="eclipse" value="\#{codeMirrorController.content}" lineNumbers="true"
	completeMethod="\#{codeMirrorController.complete}"
	extraKeys="{ 'Ctrl-Space': function(cm) { myCodeMirror.complete(); }}" /&gt;

&lt;p:commandButton actionListener="\#{codeMirrorController.changeMode}" update="codeMirror"
                 value="Change mode with AJAX" style="margin-top:10px;"/&gt;
            </ui:define>
            <ui:define name="contentTab2">
@ManagedBean
@ViewScoped
public class CodeMirrorController implements Serializable {

	private String content;
	private String mode = "javascript";

	public CodeMirrorController() {
		content = "function test() { console.log('test'); }";
	}

	public void changeMode() {
		if (mode.equals("css")) {
			mode = "javascript";
		} else {
			mode = "css";
		}
	}

	public List&lt;String&gt; complete(final String token, final String context) {
		final ArrayList&lt;String&gt; suggestions = new ArrayLis&lt;String&gt;();

		suggestions.add("context: " + context);
		suggestions.add("token: " + token);

		return suggestions;
	}

	public String getContent() {
		return content;
	}

	public void setContent(final String content) {
		this.content = content;
	}

	public String getMode() {
		return mode;
	}

	public void setMode(final String mode) {
		this.mode = mode;
	}
}
            </ui:define>
        </ui:decorate>
    </ui:define>
    <ui:define name="useCases">
        <ui:include src="/sections/codeMirror/useCasesChoice.xhtml"/>
    </ui:define>
    <ui:define name="docuTable">
        <ui:include src="/sections/shared/documentation.xhtml">
            <ui:param name="tagName" value="codeMirror"/>
        </ui:include>
    </ui:define>
</ui:composition>
</html>
